(()=>{var qn=Object.defineProperty;var Ne=(e,t)=>{for(var r in t)qn(e,r,{get:t[r],enumerable:!0})};function P(e,t,r){r=r||{};var n=e.ownerDocument,o=n.defaultView.CustomEvent;typeof o=="function"?o=new o(t,{detail:r}):(o=n.createEvent("Event"),o.initEvent(t,!1,!1),o.detail=r),e.dispatchEvent(o)}function Ae(e){return Array.isArray(e)||e instanceof Int8Array||e instanceof Int16Array||e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Uint16Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array}function Se(e){return e===(e|0)+""}function x(e){let t=document.createElement("span");return t.className="observablehq--cellname",t.textContent=`${e} = `,t}var Rn=Symbol.prototype.toString;function q(e){return Rn.call(e)}var{getOwnPropertySymbols:In,prototype:{hasOwnProperty:$n}}=Object,{toStringTag:On}=Symbol,Ze={},F=In;function Z(e,t){return $n.call(e,t)}function ce(e){return e[On]||e.constructor&&e.constructor.name||"Object"}function _(e,t){try{let r=e[t];return r&&r.constructor,r}catch{return Ze}}var kn=[{symbol:"@@__IMMUTABLE_INDEXED__@@",name:"Indexed",modifier:!0},{symbol:"@@__IMMUTABLE_KEYED__@@",name:"Keyed",modifier:!0},{symbol:"@@__IMMUTABLE_LIST__@@",name:"List",arrayish:!0},{symbol:"@@__IMMUTABLE_MAP__@@",name:"Map"},{symbol:"@@__IMMUTABLE_ORDERED__@@",name:"Ordered",modifier:!0,prefix:!0},{symbol:"@@__IMMUTABLE_RECORD__@@",name:"Record"},{symbol:"@@__IMMUTABLE_SET__@@",name:"Set",arrayish:!0,setish:!0},{symbol:"@@__IMMUTABLE_STACK__@@",name:"Stack",arrayish:!0}];function qe(e){try{let t=kn.filter(({symbol:i})=>e[i]===!0);if(!t.length)return;let r=t.find(i=>!i.modifier),n=r.name==="Map"&&t.find(i=>i.modifier&&i.prefix),o=t.some(i=>i.arrayish),a=t.some(i=>i.setish);return{name:`${n?n.name:""}${r.name}`,symbols:t,arrayish:o&&!a,setish:a}}catch{return null}}var{getPrototypeOf:Ke,getOwnPropertyDescriptors:Ln}=Object,zt=Ke({});function ue(e,t,r,n){let o=Ae(e),a,i,s,u;e instanceof Map?e instanceof e.constructor?(a=`Map(${e.size})`,i=Pn):(a="Map()",i=le):e instanceof Set?e instanceof e.constructor?(a=`Set(${e.size})`,i=Mn):(a="Set()",i=le):o?(a=`${e.constructor.name}(${e.length})`,i=jn):(u=qe(e))?(a=`Immutable.${u.name}${u.name==="Record"?"":`(${e.size})`}`,o=u.arrayish,i=u.arrayish?Fn:u.setish?Dn:Bn):n?(a=ce(e),i=Un):(a=ce(e),i=le);let l=document.createElement("span");l.className="observablehq--expanded",r&&l.appendChild(x(r));let f=l.appendChild(document.createElement("a"));f.innerHTML=`<svg width=8 height=8 class='observablehq--caret'>
    <path d='M4 7L0 1h8z' fill='currentColor' />
  </svg>`,f.appendChild(document.createTextNode(`${a}${o?" [":" {"}`)),f.addEventListener("mouseup",function(c){c.stopPropagation(),U(l,K(e,null,r,n))}),i=i(e);for(let c=0;!(s=i.next()).done&&c<20;++c)l.appendChild(s.value);if(!s.done){let c=l.appendChild(document.createElement("a"));c.className="observablehq--field",c.style.display="block",c.appendChild(document.createTextNode("  \u2026 more")),c.addEventListener("mouseup",function(d){d.stopPropagation(),l.insertBefore(s.value,l.lastChild.previousSibling);for(let p=0;!(s=i.next()).done&&p<19;++p)l.insertBefore(s.value,l.lastChild.previousSibling);s.done&&l.removeChild(l.lastChild.previousSibling),P(l,"load")})}return l.appendChild(document.createTextNode(o?"]":"}")),l}function*Pn(e){for(let[t,r]of e)yield Vn(t,r);yield*le(e)}function*Mn(e){for(let t of e)yield Ht(t);yield*le(e)}function*Dn(e){for(let t of e)yield Ht(t)}function*jn(e){for(let t=0,r=e.length;t<r;++t)t in e&&(yield $(t,_(e,t),"observablehq--index"));for(let t in e)!Se(t)&&Z(e,t)&&(yield $(t,_(e,t),"observablehq--key"));for(let t of F(e))yield $(q(t),_(e,t),"observablehq--symbol")}function*Fn(e){let t=0;for(let r=e.size;t<r;++t)yield $(t,e.get(t),!0)}function*Un(e){for(let r in Ln(e))yield $(r,_(e,r),"observablehq--key");for(let r of F(e))yield $(q(r),_(e,r),"observablehq--symbol");let t=Ke(e);t&&t!==zt&&(yield Yt(t))}function*le(e){for(let r in e)Z(e,r)&&(yield $(r,_(e,r),"observablehq--key"));for(let r of F(e))yield $(q(r),_(e,r),"observablehq--symbol");let t=Ke(e);t&&t!==zt&&(yield Yt(t))}function*Bn(e){for(let[t,r]of e)yield $(t,r,"observablehq--key")}function Yt(e){let t=document.createElement("div"),r=t.appendChild(document.createElement("span"));return t.className="observablehq--field",r.className="observablehq--prototype-key",r.textContent="  <prototype>",t.appendChild(document.createTextNode(": ")),t.appendChild(v(e,void 0,void 0,void 0,!0)),t}function $(e,t,r){let n=document.createElement("div"),o=n.appendChild(document.createElement("span"));return n.className="observablehq--field",o.className=r,o.textContent=`  ${e}`,n.appendChild(document.createTextNode(": ")),n.appendChild(v(t)),n}function Vn(e,t){let r=document.createElement("div");return r.className="observablehq--field",r.appendChild(document.createTextNode("  ")),r.appendChild(v(e)),r.appendChild(document.createTextNode(" => ")),r.appendChild(v(t)),r}function Ht(e){let t=document.createElement("div");return t.className="observablehq--field",t.appendChild(document.createTextNode("  ")),t.appendChild(v(e)),t}function Wt(e){let t=window.getSelection();return t.type==="Range"&&(t.containsNode(e,!0)||t.anchorNode.isSelfOrDescendant(e)||t.focusNode.isSelfOrDescendant(e))}function K(e,t,r,n){let o=Ae(e),a,i,s,u;if(e instanceof Map?e instanceof e.constructor?(a=`Map(${e.size})`,i=zn):(a="Map()",i=fe):e instanceof Set?e instanceof e.constructor?(a=`Set(${e.size})`,i=Yn):(a="Set()",i=fe):o?(a=`${e.constructor.name}(${e.length})`,i=Gn):(u=qe(e))?(a=`Immutable.${u.name}${u.name==="Record"?"":`(${e.size})`}`,o=u.arrayish,i=u.arrayish?Wn:u.setish?Hn:Qn):(a=ce(e),i=fe),t){let c=document.createElement("span");return c.className="observablehq--shallow",r&&c.appendChild(x(r)),c.appendChild(document.createTextNode(a)),c.addEventListener("mouseup",function(d){Wt(c)||(d.stopPropagation(),U(c,K(e)))}),c}let l=document.createElement("span");l.className="observablehq--collapsed",r&&l.appendChild(x(r));let f=l.appendChild(document.createElement("a"));f.innerHTML=`<svg width=8 height=8 class='observablehq--caret'>
    <path d='M7 4L1 8V0z' fill='currentColor' />
  </svg>`,f.appendChild(document.createTextNode(`${a}${o?" [":" {"}`)),l.addEventListener("mouseup",function(c){Wt(l)||(c.stopPropagation(),U(l,ue(e,null,r,n)))},!0),i=i(e);for(let c=0;!(s=i.next()).done&&c<20;++c)c>0&&l.appendChild(document.createTextNode(", ")),l.appendChild(s.value);return s.done||l.appendChild(document.createTextNode(", \u2026")),l.appendChild(document.createTextNode(o?"]":"}")),l}function*zn(e){for(let[t,r]of e)yield Jn(t,r);yield*fe(e)}function*Yn(e){for(let t of e)yield v(t,!0);yield*fe(e)}function*Hn(e){for(let t of e)yield v(t,!0)}function*Wn(e){let t=-1,r=0;for(let n=e.size;r<n;++r)r>t+1&&(yield Re(r-t-1)),yield v(e.get(r),!0),t=r;r>t+1&&(yield Re(r-t-1))}function*Gn(e){let t=-1,r=0;for(let n=e.length;r<n;++r)r in e&&(r>t+1&&(yield Re(r-t-1)),yield v(_(e,r),!0),t=r);r>t+1&&(yield Re(r-t-1));for(let n in e)!Se(n)&&Z(e,n)&&(yield de(n,_(e,n),"observablehq--key"));for(let n of F(e))yield de(q(n),_(e,n),"observablehq--symbol")}function*fe(e){for(let t in e)Z(e,t)&&(yield de(t,_(e,t),"observablehq--key"));for(let t of F(e))yield de(q(t),_(e,t),"observablehq--symbol")}function*Qn(e){for(let[t,r]of e)yield de(t,r,"observablehq--key")}function Re(e){let t=document.createElement("span");return t.className="observablehq--empty",t.textContent=e===1?"empty":`empty \xD7 ${e}`,t}function de(e,t,r){let n=document.createDocumentFragment(),o=n.appendChild(document.createElement("span"));return o.className=r,o.textContent=e,n.appendChild(document.createTextNode(": ")),n.appendChild(v(t,!0)),n}function Jn(e,t){let r=document.createDocumentFragment();return r.appendChild(v(e,!0)),r.appendChild(document.createTextNode(" => ")),r.appendChild(v(t,!0)),r}function Ie(e,t){if(e instanceof Date||(e=new Date(+e)),isNaN(e))return typeof t=="function"?t(e):t;let r=e.getUTCHours(),n=e.getUTCMinutes(),o=e.getUTCSeconds(),a=e.getUTCMilliseconds();return`${Zn(e.getUTCFullYear(),4)}-${O(e.getUTCMonth()+1,2)}-${O(e.getUTCDate(),2)}${r||n||o||a?`T${O(r,2)}:${O(n,2)}${o||a?`:${O(o,2)}${a?`.${O(a,3)}`:""}`:""}Z`:""}`}function Zn(e){return e<0?`-${O(-e,6)}`:e>9999?`+${O(e,6)}`:O(e,4)}function O(e,t){return`${e}`.padStart(t,"0")}function Xe(e){return Ie(e,"Invalid Date")}var Kn=Error.prototype.toString;function et(e){return e.stack||Kn.call(e)}var Xn=RegExp.prototype.toString;function tt(e){return Xn.call(e)}var rt=20;function nt(e,t,r,n){if(t===!1){if(Qt(e,/["\n]/g)<=Qt(e,/`|\${/g)){let l=document.createElement("span");n&&l.appendChild(x(n));let f=l.appendChild(document.createElement("span"));return f.className="observablehq--string",f.textContent=JSON.stringify(e),l}let i=e.split(`
`);if(i.length>rt&&!r){let l=document.createElement("div");n&&l.appendChild(x(n));let f=l.appendChild(document.createElement("span"));f.className="observablehq--string",f.textContent="`"+Gt(i.slice(0,rt).join(`
`));let c=l.appendChild(document.createElement("span")),d=i.length-rt;return c.textContent=`Show ${d} truncated line${d>1?"s":""}`,c.className="observablehq--string-expand",c.addEventListener("mouseup",function(p){p.stopPropagation(),U(l,v(e,t,!0,n))}),l}let s=document.createElement("span");n&&s.appendChild(x(n));let u=s.appendChild(document.createElement("span"));return u.className=`observablehq--string${r?" observablehq--expanded":""}`,u.textContent="`"+Gt(e)+"`",s}let o=document.createElement("span");n&&o.appendChild(x(n));let a=o.appendChild(document.createElement("span"));return a.className="observablehq--string",a.textContent=JSON.stringify(e.length>100?`${e.slice(0,50)}\u2026${e.slice(-49)}`:e),o}function Gt(e){return e.replace(/[\\`\x00-\x09\x0b-\x19]|\${/g,eo)}function eo(e){var t=e.charCodeAt(0);switch(t){case 8:return"\\b";case 9:return"\\t";case 11:return"\\v";case 12:return"\\f";case 13:return"\\r"}return t<16?"\\x0"+t.toString(16):t<32?"\\x"+t.toString(16):"\\"+e}function Qt(e,t){for(var r=0;t.exec(e);)++r;return r}var to=Function.prototype.toString,ro={prefix:"async \u0192"},no={prefix:"async \u0192*"},Jt={prefix:"class"},oo={prefix:"\u0192"},io={prefix:"\u0192*"};function ot(e,t){var r,n,o=to.call(e);switch(e.constructor&&e.constructor.name){case"AsyncFunction":r=ro;break;case"AsyncGeneratorFunction":r=no;break;case"GeneratorFunction":r=io;break;default:r=/^class\b/.test(o)?Jt:oo;break}return r===Jt?pe(r,"",t):(n=/^(?:async\s*)?(\w+)\s*=>/.exec(o))?pe(r,"("+n[1]+")",t):(n=/^(?:async\s*)?\(\s*(\w+(?:\s*,\s*\w+)*)?\s*\)/.exec(o))?pe(r,n[1]?"("+n[1].replace(/\s*,\s*/g,", ")+")":"()",t):(n=/^(?:async\s*)?function(?:\s*\*)?(?:\s*\w+)?\s*\(\s*(\w+(?:\s*,\s*\w+)*)?\s*\)/.exec(o))?pe(r,n[1]?"("+n[1].replace(/\s*,\s*/g,", ")+")":"()",t):pe(r,"(\u2026)",t)}function pe(e,t,r){var n=document.createElement("span");n.className="observablehq--function",r&&n.appendChild(x(r));var o=n.appendChild(document.createElement("span"));return o.className="observablehq--keyword",o.textContent=e.prefix,n.appendChild(document.createTextNode(t)),n}var{prototype:{toString:ao}}=Object;function v(e,t,r,n,o){let a=typeof e;switch(a){case"boolean":case"undefined":{e+="";break}case"number":{e=e===0&&1/e<0?"-0":e+"";break}case"bigint":{e=e+"n";break}case"symbol":{e=q(e,n);break}case"function":return ot(e,n);case"string":return nt(e,t,r,n);default:{if(e===null){a=null,e="null";break}if(e instanceof Date){a="date",e=Xe(e,n);break}if(e===Ze){a="forbidden",e="[forbidden]";break}switch(ao.call(e)){case"[object RegExp]":{a="regexp",e=tt(e,n);break}case"[object Error]":case"[object DOMException]":{a="error",e=et(e,n);break}default:return(r?ue:K)(e,t,n,o)}break}}let i=document.createElement("span");n&&i.appendChild(x(n));let s=i.appendChild(document.createElement("span"));return s.className=`observablehq--${a}`,s.textContent=e,i}function U(e,t){e.classList.contains("observablehq--inspect")&&t.classList.add("observablehq--inspect"),e.parentNode.replaceChild(t,e),P(t,"load")}var so=/\s+\(\d+:\d+\)$/m,M=class{constructor(t){if(!t)throw new Error("invalid node");this._node=t,t.classList.add("observablehq")}pending(){let{_node:t}=this;t.classList.remove("observablehq--error"),t.classList.add("observablehq--running")}fulfilled(t,r){let{_node:n}=this;if((!co(t)||t.parentNode&&t.parentNode!==n)&&(t=v(t,!1,n.firstChild&&n.firstChild.classList&&n.firstChild.classList.contains("observablehq--expanded"),r),t.classList.add("observablehq--inspect")),n.classList.remove("observablehq--running","observablehq--error"),n.firstChild!==t)if(n.firstChild){for(;n.lastChild!==n.firstChild;)n.removeChild(n.lastChild);n.replaceChild(t,n.firstChild)}else n.appendChild(t);P(n,"update")}rejected(t,r){let{_node:n}=this;for(n.classList.remove("observablehq--running"),n.classList.add("observablehq--error");n.lastChild;)n.removeChild(n.lastChild);var o=document.createElement("div");o.className="observablehq--inspect",r&&o.appendChild(x(r)),o.appendChild(document.createTextNode((t+"").replace(so,""))),n.appendChild(o),P(n,"error",{error:t})}};M.into=function(e){if(typeof e=="string"&&(e=document.querySelector(e),e==null))throw new Error("container not found");return function(){return new M(e.appendChild(document.createElement("div")))}};function co(e){return(e instanceof Element||e instanceof Text)&&e instanceof e.constructor}var Zt={},it={},at=34,me=10,st=13;function Xt(e){return new Function("d","return {"+e.map(function(t,r){return JSON.stringify(t)+": d["+r+'] || ""'}).join(",")+"}")}function lo(e,t){var r=Xt(e);return function(n,o){return t(r(n),o,e)}}function Kt(e){var t=Object.create(null),r=[];return e.forEach(function(n){for(var o in n)o in t||r.push(t[o]=o)}),r}function E(e,t){var r=e+"",n=r.length;return n<t?new Array(t-n+1).join(0)+r:r}function uo(e){return e<0?"-"+E(-e,6):e>9999?"+"+E(e,6):E(e,4)}function fo(e){var t=e.getUTCHours(),r=e.getUTCMinutes(),n=e.getUTCSeconds(),o=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":uo(e.getUTCFullYear(),4)+"-"+E(e.getUTCMonth()+1,2)+"-"+E(e.getUTCDate(),2)+(o?"T"+E(t,2)+":"+E(r,2)+":"+E(n,2)+"."+E(o,3)+"Z":n?"T"+E(t,2)+":"+E(r,2)+":"+E(n,2)+"Z":r||t?"T"+E(t,2)+":"+E(r,2)+"Z":"")}function $e(e){var t=new RegExp('["'+e+`
\r]`),r=e.charCodeAt(0);function n(c,d){var p,m,h=o(c,function(C,I){if(p)return p(C,I-1);m=C,p=d?lo(C,d):Xt(C)});return h.columns=m||[],h}function o(c,d){var p=[],m=c.length,h=0,C=0,I,Je=m<=0,J=!1;c.charCodeAt(m-1)===me&&--m,c.charCodeAt(m-1)===st&&--m;function Vt(){if(Je)return it;if(J)return J=!1,Zt;var Ce,Te=h,se;if(c.charCodeAt(Te)===at){for(;h++<m&&c.charCodeAt(h)!==at||c.charCodeAt(++h)===at;);return(Ce=h)>=m?Je=!0:(se=c.charCodeAt(h++))===me?J=!0:se===st&&(J=!0,c.charCodeAt(h)===me&&++h),c.slice(Te+1,Ce-1).replace(/""/g,'"')}for(;h<m;){if((se=c.charCodeAt(Ce=h++))===me)J=!0;else if(se===st)J=!0,c.charCodeAt(h)===me&&++h;else if(se!==r)continue;return c.slice(Te,Ce)}return Je=!0,c.slice(Te,m)}for(;(I=Vt())!==it;){for(var Ee=[];I!==Zt&&I!==it;)Ee.push(I),I=Vt();d&&(Ee=d(Ee,C++))==null||p.push(Ee)}return p}function a(c,d){return c.map(function(p){return d.map(function(m){return f(p[m])}).join(e)})}function i(c,d){return d==null&&(d=Kt(c)),[d.map(f).join(e)].concat(a(c,d)).join(`
`)}function s(c,d){return d==null&&(d=Kt(c)),a(c,d).join(`
`)}function u(c){return c.map(l).join(`
`)}function l(c){return c.map(f).join(e)}function f(c){return c==null?"":c instanceof Date?fo(c):t.test(c+="")?'"'+c.replace(/"/g,'""')+'"':c}return{parse:n,parseRows:o,format:i,formatBody:s,formatRows:u,formatRow:l,formatValue:f}}var B=$e(","),ct=B.parse,lt=B.parseRows,po=B.format,mo=B.formatBody,ho=B.formatRows,bo=B.formatRow,wo=B.formatValue;var V=$e("	"),ut=V.parse,ft=V.parseRows,yo=V.format,vo=V.formatBody,xo=V.formatRows,go=V.formatRow,_o=V.formatValue;function Oe(e){for(var t in e){var r=e[t].trim(),n,o;if(!r)r=null;else if(r==="true")r=!0;else if(r==="false")r=!1;else if(r==="NaN")r=NaN;else if(!isNaN(n=+r))r=n;else if(o=r.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/))Eo&&o[4]&&!o[7]&&(r=r.replace(/-/g,"/").replace(/T/," ")),r=new Date(r);else continue;e[t]=r}return e}var Eo=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours();function w(e,t,r){return{resolve(n=r){return`${e}@${t}/${n}`}}}var er=w("d3","7.8.5","dist/d3.min.js"),tr=w("@observablehq/inputs","0.10.6","dist/inputs.min.js"),rr=w("@observablehq/plot","0.6.13","dist/plot.umd.min.js"),nr=w("@observablehq/graphviz","0.2.1","dist/graphviz.min.js"),ke=w("@observablehq/highlight.js","2.0.0","highlight.min.js"),dt=w("@observablehq/katex","0.11.1","dist/katex.min.js"),or=w("lodash","4.17.21","lodash.min.js"),ir=w("htl","0.3.1","dist/htl.min.js"),ar=w("jszip","3.10.1","dist/jszip.min.js"),sr=w("marked","0.3.12","marked.min.js"),pt=w("sql.js","1.8.0","dist/sql-wasm.js"),cr=w("vega","5.22.1","build/vega.min.js"),lr=w("vega-lite","5.6.0","build/vega-lite.min.js"),ur=w("vega-lite-api","5.0.0","build/vega-lite-api.min.js"),he=w("apache-arrow","4.0.1","Arrow.es2015.min.js"),fr=w("apache-arrow","9.0.0","+esm"),Le=w("apache-arrow","11.0.0","+esm"),dr=w("arquero","4.8.8","dist/arquero.min.js"),pr=w("topojson-client","3.1.0","dist/topojson-client.min.js"),mr=w("exceljs","4.3.0","dist/exceljs.min.js"),hr=w("mermaid","9.2.2","dist/mermaid.min.js"),mt=w("leaflet","1.9.3","dist/leaflet.js"),X=w("@duckdb/duckdb-wasm","1.24.0","+esm");var Pe=new Map,be=[],ht=be.map,Co=be.some,To=be.hasOwnProperty,No=/^((?:@[^/@]+\/)?[^/@]+)(?:@([^/]+))?(?:\/(.*))?$/,Ao=/^\d+\.\d+\.\d+(-[\w-.+]+)?$/,br=/(?:\.[^/]*|\/)$/,D=class extends Error{constructor(t){super(t)}};D.prototype.name=D.name;function wr(e){let t=No.exec(e);return t&&{name:t[1],version:t[2],path:t[3]}}function bt(e="https://cdn.jsdelivr.net/npm/",t=["unpkg","jsdelivr","browser","main"]){if(!/\/$/.test(e))throw new Error("origin lacks trailing slash");function r(o){for(let a of t){let i=o[a];if(typeof i=="string")return i.startsWith("./")&&(i=i.slice(2)),br.test(i)?i:`${i}.js`}}function n(o){let a=`${e}${o.name}${o.version?`@${o.version}`:""}/package.json`,i=Pe.get(a);return i||Pe.set(a,i=fetch(a).then(s=>{if(!s.ok)throw new D("unable to load package.json");return s.redirected&&!Pe.has(s.url)&&Pe.set(s.url,i),s.json()})),i}return async function(a,i){if(a.startsWith(e)&&(a=a.substring(e.length)),/^(\w+:)|\/\//i.test(a))return a;if(/^[.]{0,2}\//i.test(a))return new URL(a,i??location).href;if(!a.length||/^[\s._]/.test(a)||/\s$/.test(a))throw new D("illegal name");let s=wr(a);if(!s)return`${e}${a}`;if(!s.version&&i!=null&&i.startsWith(e)){let l=await n(wr(i.substring(e.length)));s.version=l.dependencies&&l.dependencies[s.name]||l.peerDependencies&&l.peerDependencies[s.name]}if(s.path&&!br.test(s.path)&&(s.path+=".js"),s.path&&s.version&&Ao.test(s.version))return`${e}${s.name}@${s.version}/${s.path}`;let u=await n(s);return`${e}${u.name}@${u.version}/${s.path||r(u)||"index.js"}`}}var yr=ee(bt());function ee(e){let t=new Map,r=o(null);function n(s){if(typeof s!="string")return s;let u=t.get(s);return u||t.set(s,u=new Promise((l,f)=>{let c=document.createElement("script");c.onload=()=>{try{l(be.pop()(o(s)))}catch{f(new D("invalid module"))}c.remove()},c.onerror=()=>{f(new D("unable to load module")),c.remove()},c.async=!0,c.src=s,window.define=vr,document.head.appendChild(c)})),u}function o(s){return u=>Promise.resolve(e(u,s)).then(n)}function a(s){return ee((u,l)=>u in s&&(u=s[u],l=null,typeof u!="string")?u:e(u,l))}function i(s){return arguments.length>1?Promise.all(ht.call(arguments,r)).then(So):r(s)}return i.alias=a,i.resolve=e,i}function So(e){let t={};for(let r of e)for(let n in r)To.call(r,n)&&(r[n]==null?Object.defineProperty(t,n,{get:qo(r,n)}):t[n]=r[n]);return t}function qo(e,t){return()=>e[t]}function Ro(e){return e=e+"",e==="exports"||e==="module"}function vr(e,t,r){let n=arguments.length;n<2?(r=e,t=[]):n<3&&(r=t,t=typeof e=="string"?[]:e),be.push(Co.call(t,Ro)?o=>{let a={},i={exports:a};return Promise.all(ht.call(t,s=>(s=s+"",s==="exports"?a:s==="module"?i:o(s)))).then(s=>(r.apply(null,s),i.exports))}:o=>Promise.all(ht.call(t,o)).then(a=>typeof r=="function"?r.apply(null,a):r))}vr.amd={};var T="https://cdn.observableusercontent.com/npm/",N=yr;function xr(e){N=e}function gr(e){return e==null?N:ee(e)}async function vt(e){let[t,r]=await Promise.all([e(pt.resolve()),e.resolve(pt.resolve("dist/"))]);return t({locateFile:n=>`${r}${n}`})}var z=class e{constructor(t){Object.defineProperties(this,{_db:{value:t}})}static async open(t){let[r,n]=await Promise.all([vt(N),Promise.resolve(t).then(yt)]);return new e(new r.Database(n))}async query(t,r){return await $o(this._db,t,r)}async queryRow(t,r){return(await this.query(t,r))[0]||null}async explain(t,r){let n=await this.query(`EXPLAIN QUERY PLAN ${t}`,r);return j("pre",{className:"observablehq--inspect"},[wt(n.map(o=>o.detail).join(`
`))])}async describeTables({schema:t}={}){return this.query(`SELECT NULLIF(schema, 'main') AS schema, name FROM pragma_table_list() WHERE type = 'table'${t==null?"":" AND schema = ?"} AND name NOT LIKE 'sqlite_%' ORDER BY schema, name`,t==null?[]:[t])}async describeColumns({schema:t,table:r}={}){if(r==null)throw new Error("missing table");let n=await this.query(`SELECT name, type, "notnull" FROM pragma_table_info(?${t==null?"":", ?"}) ORDER BY cid`,t==null?[r]:[r,t]);if(!n.length)throw new Error(`table not found: ${r}`);return n.map(({name:o,type:a,notnull:i})=>({name:o,type:Io(a),databaseType:a,nullable:!i}))}async describe(t){let r=await(t===void 0?this.query("SELECT name FROM sqlite_master WHERE type = 'table'"):this.query("SELECT * FROM pragma_table_info(?)",[t]));if(!r.length)throw new Error("Not found");let{columns:n}=r;return j("table",{value:r},[j("thead",[j("tr",n.map(o=>j("th",[wt(o)])))]),j("tbody",r.map(o=>j("tr",n.map(a=>j("td",[wt(o[a])])))))])}async sql(){return this.query(...this.queryTag.apply(this,arguments))}queryTag(t,...r){return[t.join("?"),r]}};Object.defineProperty(z.prototype,"dialect",{value:"sqlite"});function Io(e){switch(e){case"NULL":return"null";case"INT":case"INTEGER":case"TINYINT":case"SMALLINT":case"MEDIUMINT":case"BIGINT":case"UNSIGNED BIG INT":case"INT2":case"INT8":return"integer";case"TEXT":case"CLOB":return"string";case"REAL":case"DOUBLE":case"DOUBLE PRECISION":case"FLOAT":case"NUMERIC":return"number";case"BLOB":return"buffer";case"DATE":case"DATETIME":return"string";default:return/^(?:(?:(?:VARYING|NATIVE) )?CHARACTER|(?:N|VAR|NVAR)CHAR)\(/.test(e)?"string":/^(?:DECIMAL|NUMERIC)\(/.test(e)?"number":"other"}}function yt(e){return typeof e=="string"?fetch(e).then(yt):e instanceof Response||e instanceof Blob?e.arrayBuffer().then(yt):e instanceof ArrayBuffer?new Uint8Array(e):e}async function $o(e,t,r){let[n]=await e.exec(t,r);if(!n)return[];let{columns:o,values:a}=n,i=a.map(s=>Object.fromEntries(s.map((u,l)=>[o[l],u])));return i.columns=o,i}function j(e,t,r){arguments.length===2&&(r=t,t=void 0);let n=document.createElement(e);if(t!==void 0)for(let o in t)n[o]=t[o];if(r!==void 0)for(let o of r)n.appendChild(o);return n}function wt(e){return document.createTextNode(e)}function we(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Me(e,t=we){let r,n=!1;if(t.length===1){let o;for(let a of e){let i=t(a);(n?we(i,o)>0:we(i,i)===0)&&(r=a,o=i,n=!0)}}else for(let o of e)(n?t(o,r)>0:t(o,o)===0)&&(r=o,n=!0);return r}function De(e){if(typeof e[Symbol.iterator]!="function")throw new TypeError("values is not iterable");return Array.from(e).reverse()}function te(e){return e&&typeof e.toArrowBuffer=="function"}function Y(e){return e&&typeof e.getChild=="function"&&typeof e.toArray=="function"&&e.schema&&Array.isArray(e.schema.fields)}function xt(e){return e.schema.fields.map(Oo)}function Oo(e){return{name:e.name,type:ko(e.type),nullable:e.nullable,databaseType:String(e.type)}}function ko(e){switch(e.typeId){case 2:return"integer";case 3:case 7:return"number";case 4:case 15:return"buffer";case 5:return"string";case 6:return"boolean";case 8:case 9:case 10:return"date";case 12:case 16:return"array";case 13:case 14:return"object";case 11:case 17:default:return"other"}}async function ye(){return await import(`${T}${Le.resolve()}`)}var gt,H=class e{constructor(t){Object.defineProperties(this,{_db:{value:t}})}async queryStream(t,r){let n=await this._db.connect(),o,a;try{if(r?.length>0?o=await(await n.prepare(t)).send(...r):o=await n.send(t),a=await o.next(),a.done)throw new Error("missing first batch")}catch(i){throw await n.close(),i}return{schema:xt(a.value),async*readRows(){try{for(;!a.done;)yield a.value.toArray(),a=await o.next()}finally{await n.close()}}}}async query(t,r){let n=await this.queryStream(t,r),o=[];for await(let a of n.readRows())for(let i of a)o.push(i);return o.schema=n.schema,o}async queryRow(t,r){let o=(await this.queryStream(t,r)).readRows();try{let{done:a,value:i}=await o.next();return a||!i.length?null:i[0]}finally{await o.return()}}async sql(t,...r){return await this.query(t.join("?"),r)}queryTag(t,...r){return[t.join("?"),r]}escape(t){return`"${t}"`}async describeTables(){return(await this.query("SHOW TABLES")).map(({name:r})=>({name:r}))}async describeColumns({table:t}={}){return(await this.query(`DESCRIBE ${this.escape(t)}`)).map(({column_name:n,column_type:o,null:a})=>({name:n,type:jo(o),nullable:a!=="NO",databaseType:o}))}static async of(t={},r={}){let n=await Do();return r.query?.castTimestampToDate===void 0&&(r={...r,query:{...r.query,castTimestampToDate:!0}}),r.query?.castBigIntToDouble===void 0&&(r={...r,query:{...r.query,castBigIntToDouble:!0}}),await n.open(r),await Promise.all(Object.entries(t).map(async([o,a])=>{if(a instanceof b)await _r(n,o,a);else if(Y(a))await je(n,o,a);else if(Array.isArray(a))await Er(n,o,a);else if(te(a))await Po(n,o,a);else if("data"in a){let{data:i,...s}=a;Y(i)?await je(n,o,i,s):await Er(n,o,i,s)}else if("file"in a){let{file:i,...s}=a;await _r(n,o,i,s)}else throw new Error(`invalid source: ${a}`)})),new e(n)}};Object.defineProperty(H.prototype,"dialect",{value:"duckdb"});async function _r(e,t,r,n){let o=await r.url();if(o.startsWith("blob:")){let i=await r.arrayBuffer();await e.registerFileBuffer(r.name,new Uint8Array(i))}else await e.registerFileURL(r.name,new URL(o,location).href,4);let a=await e.connect();try{switch(r.mimeType){case"text/csv":case"text/tab-separated-values":return await a.insertCSVFromPath(r.name,{name:t,schema:"main",...n}).catch(async i=>{if(i.toString().includes("Could not convert"))return await Lo(a,r,t);throw i});case"application/json":return await a.insertJSONFromPath(r.name,{name:t,schema:"main",...n});default:if(/\.arrow$/i.test(r.name)){let i=new Uint8Array(await r.arrayBuffer());return await a.insertArrowFromIPCStream(i,{name:t,schema:"main",...n})}if(/\.parquet$/i.test(r.name))return await a.query(`CREATE VIEW '${t}' AS SELECT * FROM parquet_scan('${r.name}')`);throw new Error(`unknown file type: ${r.mimeType}`)}}finally{await a.close()}}async function Lo(e,t,r){return await(await e.prepare(`CREATE TABLE '${r}' AS SELECT * FROM read_csv_auto(?, ALL_VARCHAR=TRUE)`)).send(t.name)}async function je(e,t,r,n){let o=await e.connect();try{await o.insertArrowTable(r,{name:t,schema:"main",...n})}finally{await o.close()}}async function Po(e,t,r){let o=(await ye()).tableFromIPC(r.toArrowBuffer());return await je(e,t,o)}async function Er(e,t,r,n){let a=(await ye()).tableFromJSON(r);return await je(e,t,a,n)}async function Mo(){let e=await import(`${T}${X.resolve()}`),t=await e.selectBundle({mvp:{mainModule:`${T}${X.resolve("dist/duckdb-mvp.wasm")}`,mainWorker:`${T}${X.resolve("dist/duckdb-browser-mvp.worker.js")}`},eh:{mainModule:`${T}${X.resolve("dist/duckdb-eh.wasm")}`,mainWorker:`${T}${X.resolve("dist/duckdb-browser-eh.worker.js")}`}}),r=new e.ConsoleLogger;return{module:e,bundle:t,logger:r}}async function Do(){gt===void 0&&(gt=Mo());let{module:e,bundle:t,logger:r}=await gt,n=await e.createWorker(t.mainWorker),o=new e.AsyncDuckDB(r,n);return await o.instantiate(t.mainModule),o}function jo(e){switch(e){case"BIGINT":case"HUGEINT":case"UBIGINT":return"bigint";case"DOUBLE":case"REAL":case"FLOAT":return"number";case"INTEGER":case"SMALLINT":case"TINYINT":case"USMALLINT":case"UINTEGER":case"UTINYINT":return"integer";case"BOOLEAN":return"boolean";case"DATE":case"TIMESTAMP":case"TIMESTAMP WITH TIME ZONE":return"date";case"VARCHAR":case"UUID":return"string";default:return/^DECIMAL\(/.test(e)?"integer":"other"}}var Et=20;function Sr(e,t){return e&&(typeof e.sql=="function"||typeof e.queryTag=="function"&&(typeof e.query=="function"||typeof e.queryStream=="function"))&&(t!=="table"||typeof e.describeColumns=="function")&&e!==Tt}function ve(e){return Array.isArray(e)&&(qr(e.schema)||Rr(e.columns)||Fo(e)||Ir(e)||$r(e))||Or(e)}function Fo(e){let t=Math.min(Et,e.length);for(let r=0;r<t;++r){let n=e[r];if(n===null||typeof n!="object")return!1}return t>0&&Uo(e[0])}function Uo(e){for(let t in e)return!0;return!1}function qr(e){return Array.isArray(e)&&e.every(Bo)}function Rr(e){return Array.isArray(e)&&e.every(t=>typeof t=="string")}function Bo(e){return e&&typeof e.name=="string"&&typeof e.type=="string"}function Ct(e){return Or(e)||Ir(e)||$r(e)}function Ir(e){let t=Math.min(Et,e.length);if(!(t>0))return!1;let r,n=!1;for(let o=0;o<t;++o){let a=e[o];if(a==null)continue;let i=typeof a;if(r===void 0)switch(i){case"number":case"boolean":case"string":case"bigint":r=i;break;default:return!1}else if(i!==r)return!1;n=!0}return n}function $r(e){let t=Math.min(Et,e.length);if(!(t>0))return!1;let r=!1;for(let n=0;n<t;++n){let o=e[n];if(o!=null){if(!(o instanceof Date))return!1;r=!0}}return r}function Or(e){return e instanceof Int8Array||e instanceof Int16Array||e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Uint16Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array}var Tt=Object.assign(async(e,t,r,n)=>{if(e=await Vo(await e,n),Sr(e))return Cr(e,kr(t,e),r);if(ve(e))return Dr(e,t);throw e?new Error("invalid data source"):new Error("missing data source")},{sql(e,t,r){return async function(){return Cr(await zo(await e,r),arguments,t)}}});function Nt(e){let t=new WeakMap;return(r,n)=>{if(!r||typeof r!="object")throw new Error("invalid data source");let o=t.get(r);return(!o||ve(r)&&r.length!==o._numRows)&&(o=e(r,n),o._numRows=r.length,t.set(r,o)),o}}var Xs=Nt(async e=>{if(e instanceof b){switch(e.mimeType){case"text/csv":return e.csv({typed:"auto"});case"text/tab-separated-values":return e.tsv({typed:"auto"});case"application/json":return e.json()}throw new Error(`unsupported file type: ${e.mimeType}`)}return e}),Vo=Nt(async(e,t)=>{if(e instanceof b){switch(e.mimeType){case"text/csv":return e.csv();case"text/tab-separated-values":return e.tsv();case"application/json":return e.json();case"application/x-sqlite3":return e.sqlite()}if(/\.(arrow|parquet)$/i.test(e.name))return ne(e,t);throw new Error(`unsupported file type: ${e.mimeType}`)}return Y(e)||te(e)?ne(e,t):ve(e)&&Ct(e)?Array.from(e,r=>({value:r})):e}),zo=Nt(async(e,t)=>{if(e instanceof b){switch(e.mimeType){case"text/csv":case"text/tab-separated-values":case"application/json":return ne(e,t);case"application/x-sqlite3":return e.sqlite()}if(/\.(arrow|parquet)$/i.test(e.name))return ne(e,t);throw new Error(`unsupported file type: ${e.mimeType}`)}return ve(e)?ne(await Yo(e,t),t):Y(e)||te(e)?ne(e,t):e});async function Yo(e,t){let r=await ye();return Ct(e)?r.tableFromArrays({[t]:e}):r.tableFromJSON(e)}function ne(e,t=e instanceof b?Ho(e):"__table"){return H.of({[t]:e})}function Ho(e){return e.name.replace(/@\d+(?=\.|$)/,"").replace(/\.\w+$/,"")}async function Cr(e,t,r){if(!e)throw new Error("missing data source");if(typeof e.queryTag=="function"){let n=new AbortController,o={signal:n.signal};if(r.then(()=>n.abort("invalidated")),typeof e.queryStream=="function")return Wo(e.queryStream(...e.queryTag.apply(e,t),o));if(typeof e.query=="function")return e.query(...e.queryTag.apply(e,t),o)}if(typeof e.sql=="function")return e.sql.apply(e,t);throw new Error("source does not implement query, queryStream, or sql")}async function*Wo(e){let t=performance.now(),r=await e,n=[];n.done=!1,n.error=null,n.schema=r.schema;try{for await(let o of r.readRows()){performance.now()-t>150&&n.length>0&&(yield n,t=performance.now());for(let a of o)n.push(a)}n.done=!0,yield n}catch(o){n.error=o,yield n}}function kr(e,t){let r=typeof t.escape=="function"?t.escape:c=>c,{select:n,from:o,filter:a,sort:i,slice:s}=e;if(!o.table)throw new Error("missing from table");if(n.columns&&n.columns.length===0)throw new Error("at least one column must be selected");let u=new Map(e.names?.map(({column:c,name:d})=>[c,d])),f=[[`SELECT ${n.columns?n.columns.map(c=>{let d=u.get(c);return d?`${r(c)} AS ${r(d)}`:r(c)}).join(", "):"*"} FROM ${Go(o.table,r)}`]];for(let c=0;c<a.length;++c)y(c?`
AND `:`
WHERE `,f),Qo(a[c],f,r);for(let c=0;c<i.length;++c)y(c?", ":`
ORDER BY `,f),Tr(i[c],f,r);if(t.dialect==="mssql"||t.dialect==="oracle"){if(s.to!==null||s.from!==null){if(!i.length){if(!n.columns)throw new Error("at least one column must be explicitly specified. Received '*'.");y(`
ORDER BY `,f),Tr({column:n.columns[0],direction:"ASC"},f,r)}y(`
OFFSET ${s.from||0} ROWS`,f),y(`
FETCH NEXT ${s.to!==null?s.to-(s.from||0):1e9} ROWS ONLY`,f)}}else(s.to!==null||s.from!==null)&&y(`
LIMIT ${s.to!==null?s.to-(s.from||0):1e9}`,f),s.from!==null&&y(` OFFSET ${s.from}`,f);return f}function Go(e,t){if(typeof e=="object"){let r="";return e.database!=null&&(r+=t(e.database)+"."),e.schema!=null&&(r+=t(e.schema)+"."),r+=t(e.table),r}else return t(e)}function y(e,t){let r=t[0];r[r.length-1]+=e}function Tr({column:e,direction:t},r,n){y(`${n(e)} ${t.toUpperCase()}`,r)}function Qo({type:e,operands:t},r,n){if(t.length<1)throw new Error("Invalid operand length");if(t.length===1||e==="v"||e==="nv")switch(re(t[0],r,n),e){case"n":case"nv":y(" IS NULL",r);return;case"nn":case"v":y(" IS NOT NULL",r);return;default:throw new Error("Invalid filter operation")}if(t.length===2&&!["in","nin"].includes(e))if(["c","nc"].includes(e)){switch(re(t[0],r,n),e){case"c":y(" LIKE ",r);break;case"nc":y(" NOT LIKE ",r);break}re(Zo(t[1]),r,n);return}else{switch(re(t[0],r,n),e){case"eq":y(" = ",r);break;case"ne":y(" <> ",r);break;case"gt":y(" > ",r);break;case"lt":y(" < ",r);break;case"gte":y(" >= ",r);break;case"lte":y(" <= ",r);break;default:throw new Error("Invalid filter operation")}re(t[1],r,n);return}switch(re(t[0],r,n),e){case"in":y(" IN (",r);break;case"nin":y(" NOT IN (",r);break;default:throw new Error("Invalid filter operation")}Jo(t.slice(1),r),y(")",r)}function re(e,t,r){e.type==="column"?y(r(e.value),t):(t.push(e.value),t[0].push(""))}function Jo(e,t){let r=!0;for(let n of e)r?r=!1:y(",",t),t.push(n.value),t[0].push("")}function Zo(e){return{...e,value:`%${e.value}%`}}function Lr(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))}function Ko(e,t){return Lr(e,t)||(e<t?-1:e>t?1:0)}function Xo(e,t){return Lr(e,t)||(e>t?-1:e<t?1:0)}var ei=e=>typeof e=="number"&&!Number.isNaN(e),ti=e=>Number.isInteger(e)&&!Number.isNaN(e),ri=e=>typeof e=="string",ni=e=>typeof e=="boolean",oi=e=>typeof e=="bigint",ii=e=>e instanceof Date&&!isNaN(e),ai=e=>e instanceof ArrayBuffer,si=e=>Array.isArray(e),ci=e=>typeof e=="object"&&e!==null,li=e=>e!=null;function _t(e){switch(e){case"string":return ri;case"bigint":return oi;case"boolean":return ni;case"number":return ei;case"integer":return ti;case"date":return ii;case"buffer":return ai;case"array":return si;case"object":return ci;case"other":default:return li}}var Pr=/^(([-+]\d{2})?\d{4}(-\d{2}(-\d{2}))|(\d{1,2})\/(\d{1,2})\/(\d{2,4}))([T ]\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/;function ui(e,t){switch(t){case"string":return typeof e=="string"||e==null?e:String(e);case"boolean":if(typeof e=="string"){let r=e.trim().toLowerCase();return r==="true"?!0:r==="false"?!1:null}return typeof e=="boolean"||e==null?e:!!e;case"bigint":return typeof e=="bigint"||e==null?e:Number.isInteger(typeof e=="string"&&!e.trim()?NaN:+e)?BigInt(e):void 0;case"integer":case"number":return typeof e=="number"?e:e==null||typeof e=="string"&&!e.trim()?NaN:Number(e);case"date":{if(e instanceof Date||e==null)return e;if(typeof e=="number")return new Date(e);let r=String(e).trim();return typeof e=="string"&&!r?null:new Date(Pr.test(r)?r:NaN)}case"array":case"object":case"buffer":case"other":return e;default:throw new Error(`Unable to coerce to type: ${t}`)}}function Mr(e){let{columns:t}=e,{schema:r}=e;return qr(r)?{schema:r,inferred:!1}:(r=Ue(e,Rr(t)?t:void 0),{schema:r,inferred:!0})}function Nr(e,t){let r=e,{schema:n,inferred:o}=Mr(e),a=new Map(n.map(({name:i,type:s})=>[i,s]));if(t.types){for(let{name:i,type:s}of t.types){a.set(i,s),n===r.schema&&(n=n.slice());let u=n.findIndex(l=>l.name===i);u>-1&&(n[u]={...n[u],type:s})}e=e.map(i=>Fe(i,a,n))}else o&&(e=e.map(i=>Fe(i,a,n)));return{source:e,schema:n}}function Ar(e,t){if(!t.names)return e;let r=new Map(t.names.map(n=>[n.column,n]));return e.map(n=>Object.fromEntries(Object.keys(n).map(o=>[r.get(o)?.name??o,n[o]])))}function Dr(e,t){let r=new Map,n=e,o=Nr(e,t);e=o.source;let a=o.schema;if(t.derive){let l=[];t.derive.map(({name:c,value:d})=>{let p=[];Ar(e,t).map((m,h)=>{let C;try{C=d(m)}catch(I){p.push({index:h,error:I}),C=void 0}l[h]?l[h]={...l[h],[c]:C}:l.push({[c]:C})}),p.length&&r.set(c,p)});let f=Nr(l,t);e=e.map((c,d)=>({...c,...f.source[d]})),a=[...a,...f.schema]}for(let{type:l,operands:f}of t.filter){let[{value:c}]=f,d=f.slice(1).map(({value:p})=>p);switch(l){case"v":{let[p]=d,m=_t(p);e=e.filter(h=>m(h[c]));break}case"nv":{let[p]=d,m=_t(p);e=e.filter(h=>!m(h[c]));break}case"eq":{let[p]=d;if(p instanceof Date){let m=+p;e=e.filter(h=>+h[c]===m)}else e=e.filter(m=>m[c]===p);break}case"ne":{let[p]=d;e=e.filter(m=>m[c]!==p);break}case"c":{let[p]=d;e=e.filter(m=>typeof m[c]=="string"&&m[c].includes(p));break}case"nc":{let[p]=d;e=e.filter(m=>typeof m[c]=="string"&&!m[c].includes(p));break}case"in":{let p=new Set(d);e=e.filter(m=>p.has(m[c]));break}case"nin":{let p=new Set(d);e=e.filter(m=>!p.has(m[c]));break}case"n":{e=e.filter(p=>p[c]==null);break}case"nn":{e=e.filter(p=>p[c]!=null);break}case"lt":{let[p]=d;e=e.filter(m=>m[c]<p);break}case"lte":{let[p]=d;e=e.filter(m=>m[c]<=p);break}case"gt":{let[p]=d;e=e.filter(m=>m[c]>p);break}case"gte":{let[p]=d;e=e.filter(m=>m[c]>=p);break}default:throw new Error(`unknown filter type: ${l}`)}}for(let{column:l,direction:f}of De(t.sort)){let c=f==="desc"?Xo:Ko;e===n&&(e=e.slice()),e.sort((d,p)=>c(d[l],p[l]))}let{from:i,to:s}=t.slice;i=i==null?0:Math.max(0,i),s=s==null?1/0:Math.max(0,s),(i>0||s<1/0)&&(e=e.slice(Math.max(0,i),Math.max(0,s)));let u=a.slice();if(t.select.columns){if(a){let l=new Map(a.map(f=>[f.name,f]));a=t.select.columns.map(f=>l.get(f))}e=e.map(l=>Object.fromEntries(t.select.columns.map(f=>[f,l[f]])))}if(t.names){let l=new Map(t.names.map(f=>[f.column,f]));a&&(a=a.map(f=>{let c=l.get(f.name);return{...f,...c?{name:c.name}:null}})),u&&(u=u.map(f=>{let c=l.get(f.name);return{...f,...c?{name:c.name}:null}})),e=Ar(e,t)}return e!==n&&a&&(e.schema=a),e.fullSchema=u,e.errors=r,e}function Fe(e,t,r){let n={};for(let o of r){let a=t.get(o.name),i=e[o.name];n[o.name]=a==="raw"?i:ui(i,a)}return n}function fi(){return{boolean:0,integer:0,number:0,date:0,string:0,array:0,object:0,bigint:0,buffer:0,defined:0}}var di=["boolean","integer","number","date","bigint","array","object","buffer"];function pi(e){let t=new Set;for(let r of e)if(r)for(let n in r)Object.prototype.hasOwnProperty.call(r,n)&&t.add(n);return Array.from(t)}function Ue(e,t=pi(e)){let r=[],o=e.slice(0,100),a={};for(let i of t){let s=a[i]=fi();for(let f of o){let c=f[i];if(c==null)continue;let d=typeof c;if(d!=="string")++s.defined,Array.isArray(c)?++s.array:c instanceof Date?++s.date:c instanceof ArrayBuffer?++s.buffer:d==="number"?(++s.number,Number.isInteger(c)&&++s.integer):d in s&&++s[d];else{if(c=c.trim(),!c)continue;++s.defined,++s.string,/^(true|false)$/i.test(c)?++s.boolean:c&&!isNaN(c)?(++s.number,Number.isInteger(+c)&&++s.integer):Pr.test(c)&&++s.date}}let u=Math.max(1,s.defined*.9),l=Me(di,f=>s[f]>=u?s[f]:NaN)??(s.string>=u?"string":"other");r.push({name:i,type:l,inferred:l})}return r}var Be=class{constructor(t){Object.defineProperties(this,{_:{value:t},sheetNames:{value:t.worksheets.map(r=>r.name),enumerable:!0}})}sheet(t,r){let n=typeof t=="number"?this.sheetNames[t]:this.sheetNames.includes(t+="")?t:null;if(n==null)throw new Error(`Sheet not found: ${t}`);let o=this._.getWorksheet(n);return mi(o,r)}};function mi(e,{range:t,headers:r}={}){let[[n,o],[a,i]]=hi(t,e),s=r?e._rows[o++]:null,u=new Set(["#"]);for(let f=n;f<=a;f++){let c=s?jr(s.findCell(f+1)):null,d=c&&c+""||bi(f);for(;u.has(d);)d+="_";u.add(d)}u=new Array(n).concat(Array.from(u));let l=new Array(i-o+1);for(let f=o;f<=i;f++){let c=l[f-o]=Object.create(null,{"#":{value:f+1}}),d=e.getRow(f+1);if(d.hasValues)for(let p=n;p<=a;p++){let m=jr(d.findCell(p+1));m!=null&&(c[u[p+1]]=m)}}return l.columns=u.filter(()=>!0),l}function jr(e){if(!e)return;let{value:t}=e;if(t&&typeof t=="object"&&!(t instanceof Date)){if(t.formula||t.sharedFormula)return t.result&&t.result.error?NaN:t.result;if(t.richText)return Fr(t);if(t.text){let{text:r}=t;return r.richText&&(r=Fr(r)),t.hyperlink&&t.hyperlink!==r?`${t.hyperlink} ${r}`:r}return t}return t}function Fr(e){return e.richText.map(t=>t.text).join("")}function hi(e=":",{columnCount:t,rowCount:r}){if(e+="",!e.match(/^[A-Z]*\d*:[A-Z]*\d*$/))throw new Error("Malformed range specifier");let[[n=0,o=0],[a=t-1,i=r-1]]=e.split(":").map(wi);return[[n,o],[a,i]]}function bi(e){let t="";e++;do t=String.fromCharCode(64+(e%26||26))+t;while(e=Math.floor((e-1)/26));return t}function wi(e){let[,t,r]=e.match(/^([A-Z]*)(\d*)$/),n=0;if(t)for(let o=0;o<t.length;o++)n+=Math.pow(26,t.length-o-1)*(t.charCodeAt(o)-64);return[n?n-1:void 0,r?+r-1:void 0]}async function k(e){let t=await fetch(await e.url());if(!t.ok)throw new Error(`Unable to load file: ${e.name}`);return t}function yi(e,t){let r=new Map(t.map(({name:n,type:o})=>[n,o]));return Object.assign(e.map(n=>Fe(n,r,t)),{schema:t})}async function Ur(e,t,{array:r=!1,typed:n=!1}={}){let o=await e.text(),a=t==="	"?r?ft:ut:r?lt:ct;if(n==="auto"&&!r){let i=a(o);return yi(i,Ue(i,i.columns))}return a(o,n&&Oe)}var W=class{constructor(t,r){Object.defineProperty(this,"name",{value:t,enumerable:!0}),r!==void 0&&Object.defineProperty(this,"mimeType",{value:r+"",enumerable:!0})}async blob(){return(await k(this)).blob()}async arrayBuffer(){return(await k(this)).arrayBuffer()}async text(){return(await k(this)).text()}async json(){return(await k(this)).json()}async stream(){return(await k(this)).body}async csv(t){return Ur(this,",",t)}async tsv(t){return Ur(this,"	",t)}async image(t){let r=await this.url();return new Promise((n,o)=>{let a=new Image;new URL(r,document.baseURI).origin!==new URL(location).origin&&(a.crossOrigin="anonymous"),Object.assign(a,t),a.onload=()=>n(a),a.onerror=()=>o(new Error(`Unable to load file: ${this.name}`)),a.src=r})}async arrow({version:t=4}={}){switch(t){case 4:{let[r,n]=await Promise.all([N(he.resolve()),k(this)]);return r.Table.from(n)}case 9:{let[r,n]=await Promise.all([import(`${T}${fr.resolve()}`),k(this)]);return r.tableFromIPC(n)}case 11:{let[r,n]=await Promise.all([import(`${T}${Le.resolve()}`),k(this)]);return r.tableFromIPC(n)}default:throw new Error(`unsupported arrow version: ${t}`)}}async sqlite(){return z.open(k(this))}async zip(){let[t,r]=await Promise.all([N(ar.resolve()),this.arrayBuffer()]);return new At(await t.loadAsync(r))}async xml(t="application/xml"){return new DOMParser().parseFromString(await this.text(),t)}async html(){return this.xml("text/html")}async xlsx(){let[t,r]=await Promise.all([N(mr.resolve()),this.arrayBuffer()]);return new Be(await new t.Workbook().xlsx.load(r))}},b=class extends W{constructor(t,r,n){super(r,n),Object.defineProperty(this,"_url",{value:t})}async url(){return await this._url+""}};function Br(e){throw new Error(`File not found: ${e}`)}function qt(e){return Object.assign(t=>{let r=e(t+="");if(r==null)throw new Error(`File not found: ${t}`);if(typeof r=="object"&&"url"in r){let{url:n,mimeType:o}=r;return new b(n,t,o)}return new b(r,t)},{prototype:b.prototype})}var At=class{constructor(t){Object.defineProperty(this,"_",{value:t}),this.filenames=Object.keys(t.files).filter(r=>!t.files[r].dir)}file(t){let r=this._.file(t+="");if(!r||r.dir)throw new Error(`file not found: ${t}`);return new St(r)}},St=class extends W{constructor(t){super(t.name),Object.defineProperty(this,"_",{value:t}),Object.defineProperty(this,"_url",{writable:!0})}async url(){return this._url||(this._url=this.blob().then(URL.createObjectURL))}async blob(){return this._.async("blob")}async arrayBuffer(){return this._.async("arraybuffer")}async text(){return this._.async("text")}async json(){return JSON.parse(await this.text())}};var Rt={};Ne(Rt,{canvas:()=>Vr,context2d:()=>zr,download:()=>Yr,element:()=>Hr,input:()=>Wr,range:()=>Gr,select:()=>Qr,svg:()=>Jr,text:()=>Zr,uid:()=>ze});function Vr(e,t){var r=document.createElement("canvas");return r.width=e,r.height=t,r}function zr(e,t,r){r==null&&(r=devicePixelRatio);var n=document.createElement("canvas");n.width=e*r,n.height=t*r,n.style.width=e+"px";var o=n.getContext("2d");return o.scale(r,r),o}function Yr(e,t="untitled",r="Save"){let n=document.createElement("a"),o=n.appendChild(document.createElement("button"));o.textContent=r,n.download=t;async function a(){await new Promise(requestAnimationFrame),URL.revokeObjectURL(n.href),n.removeAttribute("href"),o.textContent=r,o.disabled=!1}return n.onclick=async i=>{if(o.disabled=!0,n.href)return a();o.textContent="Saving\u2026";try{let s=await(typeof e=="function"?e():e);o.textContent="Download",n.href=URL.createObjectURL(s)}catch{o.textContent=r}if(i.eventPhase)return a();o.disabled=!1},n}var Ve={math:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Hr(e,t){var r=e+="",n=r.indexOf(":"),o;n>=0&&(r=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1));var a=Ve.hasOwnProperty(r)?document.createElementNS(Ve[r],e):document.createElement(e);if(t)for(var i in t)r=i,n=r.indexOf(":"),o=t[i],n>=0&&(r=i.slice(0,n))!=="xmlns"&&(i=i.slice(n+1)),Ve.hasOwnProperty(r)?a.setAttributeNS(Ve[r],i,o):a.setAttribute(i,o);return a}function Wr(e){var t=document.createElement("input");return e!=null&&(t.type=e),t}function Gr(e,t,r){arguments.length===1&&(t=e,e=null);var n=document.createElement("input");return n.min=e=e==null?0:+e,n.max=t=t==null?1:+t,n.step=r==null?"any":r=+r,n.type="range",n}function Qr(e){var t=document.createElement("select");return Array.prototype.forEach.call(e,function(r){var n=document.createElement("option");n.value=n.textContent=r,t.appendChild(n)}),t}function Jr(e,t){var r=document.createElementNS("http://www.w3.org/2000/svg","svg");return r.setAttribute("viewBox",[0,0,e,t]),r.setAttribute("width",e),r.setAttribute("height",t),r}function Zr(e){return document.createTextNode(e)}var vi=0;function ze(e){return new Kr("O-"+(e==null?"":e+"-")+ ++vi)}function Kr(e){this.id=e,this.href=new URL(`#${e}`,location)+""}Kr.prototype.toString=function(){return"url("+this.href+")"};var It={};Ne(It,{buffer:()=>Xr,text:()=>en,url:()=>tn});function Xr(e){return new Promise(function(t,r){var n=new FileReader;n.onload=function(){t(n.result)},n.onerror=r,n.readAsArrayBuffer(e)})}function en(e){return new Promise(function(t,r){var n=new FileReader;n.onload=function(){t(n.result)},n.onerror=r,n.readAsText(e)})}function tn(e){return new Promise(function(t,r){var n=new FileReader;n.onload=function(){t(n.result)},n.onerror=r,n.readAsDataURL(e)})}var $t={};Ne($t,{disposable:()=>Ye,filter:()=>rn,input:()=>on,map:()=>an,observe:()=>L,queue:()=>sn,range:()=>cn,valueAt:()=>ln,worker:()=>un});function oe(){return this}function Ye(e,t){let r=!1;if(typeof t!="function")throw new Error("dispose is not a function");return{[Symbol.iterator]:oe,next:()=>r?{done:!0}:(r=!0,{done:!1,value:e}),return:()=>(r=!0,t(e),{done:!0}),throw:()=>({done:r=!0})}}function*rn(e,t){for(var r,n=-1;!(r=e.next()).done;)t(r.value,++n)&&(yield r.value)}function L(e){let t=!1,r,n,o=e(a);if(o!=null&&typeof o!="function")throw new Error(typeof o.then=="function"?"async initializers are not supported":"initializer returned something, but not a dispose function");function a(s){return n?(n(s),n=null):t=!0,r=s}function i(){return{done:!1,value:t?(t=!1,Promise.resolve(r)):new Promise(s=>n=s)}}return{[Symbol.iterator]:oe,throw:()=>({done:!0}),return:()=>(o?.(),{done:!0}),next:i}}function on(e){return L(function(t){var r=xi(e),n=nn(e);function o(){t(nn(e))}return e.addEventListener(r,o),n!==void 0&&t(n),function(){e.removeEventListener(r,o)}})}function nn(e){switch(e.type){case"range":case"number":return e.valueAsNumber;case"date":return e.valueAsDate;case"checkbox":return e.checked;case"file":return e.multiple?e.files:e.files[0];case"select-multiple":return Array.from(e.selectedOptions,t=>t.value);default:return e.value}}function xi(e){switch(e.type){case"button":case"submit":case"checkbox":return"click";case"file":return"change";default:return"input"}}function*an(e,t){for(var r,n=-1;!(r=e.next()).done;)yield t(r.value,++n)}function sn(e){let t,r=[],n=e(o);if(n!=null&&typeof n!="function")throw new Error(typeof n.then=="function"?"async initializers are not supported":"initializer returned something, but not a dispose function");function o(i){return r.push(i),t&&(t(r.shift()),t=null),i}function a(){return{done:!1,value:r.length?Promise.resolve(r.shift()):new Promise(i=>t=i)}}return{[Symbol.iterator]:oe,throw:()=>({done:!0}),return:()=>(n?.(),{done:!0}),next:a}}function*cn(e,t,r){e=+e,t=+t,r=(o=arguments.length)<2?(t=e,e=0,1):o<3?1:+r;for(var n=-1,o=Math.max(0,Math.ceil((t-e)/r))|0;++n<o;)yield e+n*r}function ln(e,t){if(!(!isFinite(t=+t)||t<0||t!==t|0)){for(var r,n=-1;!(r=e.next()).done;)if(++n===t)return r.value}}function un(e){let t=URL.createObjectURL(new Blob([e],{type:"text/javascript"})),r=new Worker(t);return Ye(r,()=>{r.terminate(),URL.revokeObjectURL(t)})}function ie(e,t){return function(r){var n=r[0],o=[],a,i=null,s,u,l,f,c,d,p,m=-1;for(f=1,c=arguments.length;f<c;++f){if(a=arguments[f],a instanceof Node)o[++m]=a,n+="<!--o:"+m+"-->";else if(Array.isArray(a)){for(d=0,p=a.length;d<p;++d)s=a[d],s instanceof Node?(i===null&&(o[++m]=i=document.createDocumentFragment(),n+="<!--o:"+m+"-->"),i.appendChild(s)):(i=null,n+=s);i=null}else n+=a;n+=r[f]}if(i=e(n),++m>0){for(u=new Array(m),l=document.createTreeWalker(i,NodeFilter.SHOW_COMMENT,null,!1);l.nextNode();)s=l.currentNode,/^o:/.test(s.nodeValue)&&(u[+s.nodeValue.slice(2)]=s);for(f=0;f<m;++f)(s=u[f])&&s.parentNode.replaceChild(o[f],s)}return i.childNodes.length===1?i.removeChild(i.firstChild):i.nodeType===11?((s=t()).appendChild(i),s):i}}var fn=ie(function(e){var t=document.createElement("template");return t.innerHTML=e.trim(),document.importNode(t.content,!0)},function(){return document.createElement("span")});async function dn(e){let t=await e(mt.resolve());if(!t._style){let r=document.createElement("link");r.rel="stylesheet",r.href=await e.resolve(mt.resolve("dist/leaflet.css")),t._style=document.head.appendChild(r)}return t}function pn(e){return e(sr.resolve()).then(function(t){return ie(function(r){var n=document.createElement("div");n.innerHTML=t(r,{langPrefix:""}).trim();var o=n.querySelectorAll("pre code[class]");return o.length>0&&e(ke.resolve()).then(function(a){o.forEach(function(i){function s(){a.highlightBlock(i),i.parentNode.classList.add("observablehq--md-pre")}a.getLanguage(i.className)?s():e(ke.resolve("async-languages/index.js")).then(u=>{if(u.has(i.className))return e(ke.resolve("async-languages/"+u.get(i.className))).then(l=>{a.registerLanguage(i.className,l)})}).then(s,s)})}),n},function(){return document.createElement("div")})})}async function mn(e){let t=await e(hr.resolve());return t.initialize({securityLevel:"loose",theme:"neutral"}),function(){let n=document.createElement("div");return n.innerHTML=t.render(ze().id,String.raw.apply(String,arguments)),n.removeChild(n.firstChild)}}function hn(e){let t;Object.defineProperties(this,{generator:{value:L(r=>void(t=r))},value:{get:()=>e,set:r=>t(e=r)}}),e!==void 0&&t(e)}function*bn(){for(;;)yield Date.now()}var kt={};Ne(kt,{delay:()=>wn,tick:()=>yn,when:()=>He});function wn(e,t){return new Promise(function(r){setTimeout(function(){r(t)},e)})}var Ot=new Map;function gi(e,t){var r=new Promise(function(n){Ot.delete(t);var o=t-e;if(!(o>0))throw new Error("invalid time");if(o>2147483647)throw new Error("too long to wait");setTimeout(n,o)});return Ot.set(t,r),r}function He(e,t){var r;return(r=Ot.get(e=+e))?r.then(()=>t):(r=Date.now())>=e?Promise.resolve(t):gi(r,e).then(()=>t)}function yn(e,t){return He(Math.ceil((Date.now()+1)/e)*e,t)}function vn(e,t){if(/^(\w+:)|\/\//i.test(e))return e;if(/^[.]{0,2}\//i.test(e))return new URL(e,t??location).href;if(!e.length||/^[\s._]/.test(e)||/\s$/.test(e))throw new Error("illegal name");return"https://unpkg.com/"+e}var xn=ie(function(e){var t=document.createElementNS("http://www.w3.org/2000/svg","g");return t.innerHTML=e.trim(),t},function(){return document.createElementNS("http://www.w3.org/2000/svg","g")});var _i=String.raw;function Ei(e){return new Promise(function(t,r){var n=document.createElement("link");n.rel="stylesheet",n.href=e,n.onerror=r,n.onload=t,document.head.appendChild(n)})}function gn(e){return Promise.all([e(dt.resolve()),e.resolve(dt.resolve("dist/katex.min.css")).then(Ei)]).then(function(t){var r=t[0],n=o();function o(a){return function(){var i=document.createElement("div");return r.render(_i.apply(String,arguments),i,a),i.removeChild(i.firstChild)}}return n.options=o,n.block=o({displayMode:!0}),n})}async function _n(e){let[t,r,n]=await Promise.all([cr,lr,ur].map(o=>e(o.resolve())));return n.register(t,r)}function En(){return L(function(e){var t=e(document.body.clientWidth);function r(){var n=document.body.clientWidth;n!==t&&e(t=n)}return window.addEventListener("resize",r),function(){window.removeEventListener("resize",r)}})}var We=Object.assign(Object.defineProperties(function(t){let r=gr(t);Object.defineProperties(this,Ci({FileAttachment:()=>Br,Mutable:()=>hn,now:bn,width:En,dot:()=>r(nr.resolve()),htl:()=>r(ir.resolve()),html:()=>fn,md:()=>pn(r),svg:()=>xn,tex:()=>gn(r),_:()=>r(or.resolve()),aq:()=>r.alias({"apache-arrow":he.resolve()})(dr.resolve()),Arrow:()=>r(he.resolve()),d3:()=>r(er.resolve()),DuckDBClient:()=>H,Inputs:()=>r(tr.resolve()).then(n=>({...n,file:n.fileOf(W)})),L:()=>dn(r),mermaid:()=>mn(r),Plot:()=>r(rr.resolve()),__query:()=>Tt,require:()=>r,resolve:()=>vn,SQLite:()=>vt(r),SQLiteDatabaseClient:()=>z,topojson:()=>r(pr.resolve()),vl:()=>_n(r),aapl:()=>new b("https://static.observableusercontent.com/files/3ccff97fd2d93da734e76829b2b066eafdaac6a1fafdec0faf6ebc443271cfc109d29e80dd217468fcb2aff1e6bffdc73f356cc48feb657f35378e6abbbb63b9").csv({typed:!0}),alphabet:()=>new b("https://static.observableusercontent.com/files/75d52e6c3130b1cae83cda89305e17b50f33e7420ef205587a135e8562bcfd22e483cf4fa2fb5df6dff66f9c5d19740be1cfaf47406286e2eb6574b49ffc685d").csv({typed:!0}),cars:()=>new b("https://static.observableusercontent.com/files/048ec3dfd528110c0665dfa363dd28bc516ffb7247231f3ab25005036717f5c4c232a5efc7bb74bc03037155cb72b1abe85a33d86eb9f1a336196030443be4f6").csv({typed:!0}),citywages:()=>new b("https://static.observableusercontent.com/files/39837ec5121fcc163131dbc2fe8c1a2e0b3423a5d1e96b5ce371e2ac2e20a290d78b71a4fb08b9fa6a0107776e17fb78af313b8ea70f4cc6648fad68ddf06f7a").csv({typed:!0}),diamonds:()=>new b("https://static.observableusercontent.com/files/87942b1f5d061a21fa4bb8f2162db44e3ef0f7391301f867ab5ba718b225a63091af20675f0bfe7f922db097b217b377135203a7eab34651e21a8d09f4e37252").csv({typed:!0}),flare:()=>new b("https://static.observableusercontent.com/files/a6b0d94a7f5828fd133765a934f4c9746d2010e2f342d335923991f31b14120de96b5cb4f160d509d8dc627f0107d7f5b5070d2516f01e4c862b5b4867533000").csv({typed:!0}),industries:()=>new b("https://static.observableusercontent.com/files/76f13741128340cc88798c0a0b7fa5a2df8370f57554000774ab8ee9ae785ffa2903010cad670d4939af3e9c17e5e18e7e05ed2b38b848ac2fc1a0066aa0005f").csv({typed:!0}),miserables:()=>new b("https://static.observableusercontent.com/files/31d904f6e21d42d4963ece9c8cc4fbd75efcbdc404bf511bc79906f0a1be68b5a01e935f65123670ed04e35ca8cae3c2b943f82bf8db49c5a67c85cbb58db052").json(),olympians:()=>new b("https://static.observableusercontent.com/files/31ca24545a0603dce099d10ee89ee5ae72d29fa55e8fc7c9ffb5ded87ac83060d80f1d9e21f4ae8eb04c1e8940b7287d179fe8060d887fb1f055f430e210007c").csv({typed:!0}),penguins:()=>new b("https://static.observableusercontent.com/files/715db1223e067f00500780077febc6cebbdd90c151d3d78317c802732252052ab0e367039872ab9c77d6ef99e5f55a0724b35ddc898a1c99cb14c31a379af80a").csv({typed:!0}),pizza:()=>new b("https://static.observableusercontent.com/files/c653108ab176088cacbb338eaf2344c4f5781681702bd6afb55697a3f91b511c6686ff469f3e3a27c75400001a2334dbd39a4499fe46b50a8b3c278b7d2f7fb5").csv({typed:!0}),weather:()=>new b("https://static.observableusercontent.com/files/693a46b22b33db0f042728700e0c73e836fa13d55446df89120682d55339c6db7cc9e574d3d73f24ecc9bc7eb9ac9a1e7e104a1ee52c00aab1e77eb102913c1f").csv({typed:!0}),DOM:Rt,Files:It,Generators:$t,Promises:kt}))},{resolve:{get:()=>N.resolve,enumerable:!0,configurable:!0},require:{get:()=>N,set:xr,enumerable:!0,configurable:!0}}),{resolveFrom:bt,requireFrom:ee});function Ci(e){return Object.fromEntries(Object.entries(e).map(Ti))}function Ti([e,t]){return[e,{value:t,writable:!0,enumerable:!0}]}var g=class extends Error{constructor(t,r){super(t),this.input=r}};g.prototype.name="RuntimeError";function Cn(e){return e&&typeof e.next=="function"&&typeof e.return=="function"}function xe(e){return()=>e}function ae(e){return e}function Tn(e){return()=>{throw e}}var Nn=Array.prototype,An=Nn.map,pu=Nn.forEach;function A(){}var Ge=1,Q=2,ge=3,G=Symbol("no-observer");function R(e,t,r,n){r||(r=G),Object.defineProperties(this,{_observer:{value:r,writable:!0},_definition:{value:Lt,writable:!0},_duplicate:{value:void 0,writable:!0},_duplicates:{value:void 0,writable:!0},_indegree:{value:NaN,writable:!0},_inputs:{value:[],writable:!0},_invalidate:{value:A,writable:!0},_module:{value:t},_name:{value:null,writable:!0},_outputs:{value:new Set,writable:!0},_promise:{value:Promise.resolve(void 0),writable:!0},_reachable:{value:r!==G,writable:!0},_rejector:{value:qi(this)},_shadow:{value:Ni(t,n)},_type:{value:e},_value:{value:void 0,writable:!0},_version:{value:0,writable:!0}})}Object.defineProperties(R.prototype,{_pending:{value:ki,writable:!0,configurable:!0},_fulfilled:{value:Li,writable:!0,configurable:!0},_rejected:{value:Pi,writable:!0,configurable:!0},_resolve:{value:Ii,writable:!0,configurable:!0},define:{value:Ri,writable:!0,configurable:!0},delete:{value:Oi,writable:!0,configurable:!0},import:{value:$i,writable:!0,configurable:!0}});function Ni(e,t){return t?.shadow?new Map(Object.entries(t.shadow).map(([r,n])=>[r,new R(Q,e).define([],n)])):null}function Ai(e){e._module._runtime._dirty.add(e),e._outputs.add(this)}function Si(e){e._module._runtime._dirty.add(e),e._outputs.delete(this)}function Lt(){throw Lt}function S(){throw S}function qi(e){return t=>{throw t===S?t:t===Lt?new g(`${e._name} is not defined`,e._name):t instanceof Error&&t.message?new g(t.message,e._name):new g(`${e._name} could not be resolved`,e._name)}}function Sn(e){return()=>{throw new g(`${e} is defined more than once`)}}function Ri(e,t,r){switch(arguments.length){case 1:{r=e,e=t=null;break}case 2:{r=t,typeof e=="string"?t=null:(t=e,e=null);break}}return Pt.call(this,e==null?null:String(e),t==null?[]:An.call(t,this._resolve,this),typeof r=="function"?r:xe(r))}function Ii(e){return this._shadow?.get(e)??this._module._resolve(e)}function Pt(e,t,r){let n=this._module._scope,o=this._module._runtime;if(this._inputs.forEach(Si,this),t.forEach(Ai,this),this._inputs=t,this._definition=r,this._value=void 0,r===A?o._variables.delete(this):o._variables.add(this),e!==this._name||n.get(e)!==this){let a,i;if(this._name)if(this._outputs.size)n.delete(this._name),i=this._module._resolve(this._name),i._outputs=this._outputs,this._outputs=new Set,i._outputs.forEach(function(s){s._inputs[s._inputs.indexOf(this)]=i},this),i._outputs.forEach(o._updates.add,o._updates),o._dirty.add(i).add(this),n.set(this._name,i);else if((i=n.get(this._name))===this)n.delete(this._name);else if(i._type===ge)i._duplicates.delete(this),this._duplicate=void 0,i._duplicates.size===1&&(i=i._duplicates.keys().next().value,a=n.get(this._name),i._outputs=a._outputs,a._outputs=new Set,i._outputs.forEach(function(s){s._inputs[s._inputs.indexOf(a)]=i}),i._definition=i._duplicate,i._duplicate=void 0,o._dirty.add(a).add(i),o._updates.add(i),n.set(this._name,i));else throw new Error;if(this._outputs.size)throw new Error;e&&((i=n.get(e))?i._type===ge?(this._definition=Sn(e),this._duplicate=r,i._duplicates.add(this)):i._type===Q?(this._outputs=i._outputs,i._outputs=new Set,this._outputs.forEach(function(s){s._inputs[s._inputs.indexOf(i)]=this},this),o._dirty.add(i).add(this),n.set(e,this)):(i._duplicate=i._definition,this._duplicate=r,a=new R(ge,this._module),a._name=e,a._definition=this._definition=i._definition=Sn(e),a._outputs=i._outputs,i._outputs=new Set,a._outputs.forEach(function(s){s._inputs[s._inputs.indexOf(i)]=a}),a._duplicates=new Set([this,i]),o._dirty.add(i).add(a),o._updates.add(i).add(a),n.set(e,a)):n.set(e,this)),this._name=e}return this._version>0&&++this._version,o._updates.add(this),o._compute(),this}function $i(e,t,r){return arguments.length<3&&(r=t,t=e),Pt.call(this,String(t),[r._resolve(String(e))],ae)}function Oi(){return Pt.call(this,null,[],A)}function ki(){this._observer.pending&&this._observer.pending()}function Li(e){this._observer.fulfilled&&this._observer.fulfilled(e,this._name)}function Pi(e){this._observer.rejected&&this._observer.rejected(e,this._name)}var Dt=Symbol("variable"),jt=Symbol("invalidation"),Ft=Symbol("visibility");function _e(e,t=[]){Object.defineProperties(this,{_runtime:{value:e},_scope:{value:new Map},_builtins:{value:new Map([["@variable",Dt],["invalidation",jt],["visibility",Ft],...t])},_source:{value:null,writable:!0}})}Object.defineProperties(_e.prototype,{_resolve:{value:Vi,writable:!0,configurable:!0},redefine:{value:Mi,writable:!0,configurable:!0},define:{value:Di,writable:!0,configurable:!0},derive:{value:Bi,writable:!0,configurable:!0},import:{value:ji,writable:!0,configurable:!0},value:{value:Ui,writable:!0,configurable:!0},variable:{value:Fi,writable:!0,configurable:!0},builtin:{value:zi,writable:!0,configurable:!0}});function Mi(e){let t=this._scope.get(e);if(!t)throw new g(`${e} is not defined`);if(t._type===ge)throw new g(`${e} is defined more than once`);return t.define.apply(t,arguments)}function Di(){let e=new R(Ge,this);return e.define.apply(e,arguments)}function ji(){let e=new R(Ge,this);return e.import.apply(e,arguments)}function Fi(e,t){return new R(Ge,this,e,t)}async function Ui(e){let t=this._scope.get(e);if(!t)throw new g(`${e} is not defined`);if(t._observer===G){t=this.variable(!0).define([e],ae);try{return await Mt(this._runtime,t)}finally{t.delete()}}else return Mt(this._runtime,t)}async function Mt(e,t){await e._compute();try{return await t._promise}catch(r){if(r===S)return Mt(e,t);throw r}}function Bi(e,t){let r=new Map,n=new Set,o=[];function a(s){let u=r.get(s);return u||(u=new _e(s._runtime,s._builtins),u._source=s,r.set(s,u),o.push([u,s]),n.add(s),u)}let i=a(this);for(let s of e){let{alias:u,name:l}=typeof s=="object"?s:{name:s};i.import(l,u??l,t)}for(let s of n)for(let[u,l]of s._scope)if(l._definition===ae){if(s===this&&i._scope.has(u))continue;let f=l._inputs[0]._module;f._source&&a(f)}for(let[s,u]of o)for(let[l,f]of u._scope){let c=s._scope.get(l);if(!(c&&c._type!==Q))if(f._definition===ae){let d=f._inputs[0],p=d._module;s.import(d._name,l,r.get(p)||p)}else s.define(l,f._inputs.map(Yi),f._definition)}return i}function Vi(e){let t=this._scope.get(e),r;if(!t)if(t=new R(Q,this),this._builtins.has(e))t.define(e,xe(this._builtins.get(e)));else if(this._runtime._builtin._scope.has(e))t.import(e,this._runtime._builtin);else{try{r=this._runtime._global(e)}catch(n){return t.define(e,Tn(n))}r===void 0?this._scope.set(t._name=e,t):t.define(e,xe(r))}return t}function zi(e,t){this._builtins.set(e,t)}function Yi(e){return e._name}var Hi=typeof requestAnimationFrame=="function"?requestAnimationFrame:typeof setImmediate=="function"?setImmediate:e=>setTimeout(e,0);function Qe(e=new We,t=ua){let r=this.module();if(Object.defineProperties(this,{_dirty:{value:new Set},_updates:{value:new Set},_precomputes:{value:[],writable:!0},_computing:{value:null,writable:!0},_init:{value:null,writable:!0},_modules:{value:new Map},_variables:{value:new Set},_disposed:{value:!1,writable:!0},_builtin:{value:r},_global:{value:t}}),e)for(let n in e)new R(Q,r).define(n,[],e[n])}Object.defineProperties(Qe.prototype,{_precompute:{value:Qi,writable:!0,configurable:!0},_compute:{value:Ji,writable:!0,configurable:!0},_computeSoon:{value:Zi,writable:!0,configurable:!0},_computeNow:{value:Ki,writable:!0,configurable:!0},dispose:{value:Wi,writable:!0,configurable:!0},module:{value:Gi,writable:!0,configurable:!0},fileAttachments:{value:qt,writable:!0,configurable:!0}});function Wi(){this._computing=Promise.resolve(),this._disposed=!0,this._variables.forEach(e=>{e._invalidate(),e._version=NaN})}function Gi(e,t=A){let r;if(e===void 0)return(r=this._init)?(this._init=null,r):new _e(this);if(r=this._modules.get(e),r)return r;this._init=r=new _e(this),this._modules.set(e,r);try{e(this,t)}finally{this._init=null}return r}function Qi(e){this._precomputes.push(e),this._compute()}function Ji(){return this._computing||(this._computing=this._computeSoon())}function Zi(){return new Promise(Hi).then(()=>this._disposed?void 0:this._computeNow())}async function Ki(){let e=[],t,r,n=this._precomputes;if(n.length){this._precomputes=[];for(let a of n)a();await Xi(3)}t=new Set(this._dirty),t.forEach(function(a){a._inputs.forEach(t.add,t);let i=la(a);i>a._reachable?this._updates.add(a):i<a._reachable&&a._invalidate(),a._reachable=i},this),t=new Set(this._updates),t.forEach(function(a){a._reachable?(a._indegree=0,a._outputs.forEach(t.add,t)):(a._indegree=NaN,t.delete(a))}),this._computing=null,this._updates.clear(),this._dirty.clear(),t.forEach(function(a){a._outputs.forEach(ta)});do{for(t.forEach(function(a){a._indegree===0&&e.push(a)});r=e.pop();)ia(r),r._outputs.forEach(o),t.delete(r);t.forEach(function(a){ea(a)&&(sa(a,new g("circular definition")),a._outputs.forEach(ra),t.delete(a))})}while(t.size);function o(a){--a._indegree===0&&e.push(a)}}function Xi(e=0){let t=Promise.resolve();for(let r=0;r<e;++r)t=t.then(()=>{});return t}function ea(e){let t=new Set(e._inputs);for(let r of t){if(r===e)return!0;r._inputs.forEach(t.add,t)}return!1}function ta(e){++e._indegree}function ra(e){--e._indegree}function na(e){return e._promise.catch(e._rejector)}function Ut(e){return new Promise(function(t){e._invalidate=t})}function oa(e,t){let r=typeof IntersectionObserver=="function"&&t._observer&&t._observer._node,n=!r,o=A,a=A,i,s;return r&&(s=new IntersectionObserver(([u])=>(n=u.isIntersecting)&&(i=null,o())),s.observe(r),e.then(()=>(s.disconnect(),s=null,a()))),function(u){return n?Promise.resolve(u):s?(i||(i=new Promise((l,f)=>(o=l,a=f))),i.then(()=>u)):Promise.reject()}}function ia(e){e._invalidate(),e._invalidate=A,e._pending();let t=e._value,r=++e._version,n=null,o=e._promise=(e._inputs.length?Promise.all(e._inputs.map(na)).then(a):new Promise(s=>s(e._definition.call(t)))).then(i);function a(s){if(e._version!==r)throw S;for(let u=0,l=s.length;u<l;++u)switch(s[u]){case jt:{s[u]=n=Ut(e);break}case Ft:{n||(n=Ut(e)),s[u]=oa(n,e);break}case Dt:{s[u]=e;break}}return e._definition.apply(t,s)}function i(s){if(e._version!==r)throw S;return Cn(s)?((n||Ut(e)).then(ca(s)),aa(e,r,s)):s}o.then(s=>{e._value=s,e._fulfilled(s)},s=>{s===S||e._version!==r||(e._value=void 0,e._rejected(s))})}function aa(e,t,r){let n=e._module._runtime,o;function a(u){return new Promise(l=>l(r.next(o))).then(({done:l,value:f})=>l?void 0:Promise.resolve(f).then(u))}function i(){let u=a(l=>{if(e._version!==t)throw S;return o=l,s(l,u).then(()=>n._precompute(i)),e._fulfilled(l),l});u.catch(l=>{l===S||e._version!==t||(s(void 0,u),e._rejected(l))})}function s(u,l){return e._value=u,e._promise=l,e._outputs.forEach(n._updates.add,n._updates),n._compute()}return a(u=>{if(e._version!==t)throw S;return o=u,n._precompute(i),u})}function sa(e,t){e._invalidate(),e._invalidate=A,e._pending(),++e._version,e._indegree=NaN,(e._promise=Promise.reject(t)).catch(A),e._value=void 0,e._rejected(t)}function ca(e){return function(){e.return()}}function la(e){if(e._observer!==G)return!0;let t=new Set(e._outputs);for(let r of t){if(r._observer!==G)return!0;r._outputs.forEach(t.add,t)}return!1}function ua(e){return globalThis[e]}function fa(e,t){let r=document.createElement("div");return r.id=`observable-${e.id}-${t}`,console.log(r.id),e.appendChild(r),r}function da(e,t){for(let[r,n]of Object.entries(t.data))console.log(r,n),e.redefine(r,n)}function pa(e,t){let r=`observable-${e.id}`;console.log(r),Shiny.addCustomMessageHandler(r,n=>{console.log(n),da(t,n)})}var Bt=class extends Shiny.OutputBinding{find(t){return t.find(".shiny-observable-output")}renderValue(t,r){console.log(r),t.style.width=r.width,import(r.notebook).then(o=>{let a=o.default,i=new Qe,s;if(r.cells==null)s=i.module(a,M.into(t));else{let u=-1;s=i.module(a,l=>(u++,console.log("cell",l,u),r.cells.includes(l)||r.cells.includes(u)?(console.log("embed me"),new M(fa(t,l))):!0)),console.log("main",s);for(let[l,f]of Object.entries(r.data))console.log(l,f),s.redefine(l,f);pa(t,s)}})}};Shiny.outputBindings.register(new Bt,"shiny-observable-output");})();
